<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Eco - Recuerdos</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body class="recuerdos-page">

<h1>Nuevo recuerdo</h1>

<form method="POST">
  <input type="text" name="titulo" placeholder="Título del momento" required>
  <input type="text" name="cancion" placeholder="Título de la canción">
  <input type="text" name="artista" placeholder="Artista">
  <input type="text" name="portada" placeholder="URL portada (opcional)">
  <textarea name="nota" placeholder="¿Qué significa para ti?"></textarea>
  <button type="submit" name="buscar" value="1">Buscar en Spotify</button>
  <button type="submit">Guardar recuerdo</button>
</form>

<div class="spotify-resultados">
  <h3>Elige una canción</h3>

  {% if resultados %}
    {% for r in resultados %}
      <div class="spotify-item">
        <img src="{{ r.portada }}" class="spotify-portada">
        <div class="spotify-info">
          <div class="spotify-titulo">{{ r.titulo }}</div>
          <div class="spotify-artista">{{ r.artista }}</div>
        </div>
      </div>
    {% endfor %}
  {% else %}
    <p class="spotify-vacio">Todavía no hay resultados de Spotify.</p>
  {% endif %}
</div>

<h2>Tus recuerdos</h2>

<div class="timeline">
{% for r in recuerdos %}
  <div class="timeline-item {% if loop.first %}nuevo{% endif %}">
    <div class="timeline-dot"></div>
    <div class="timeline-content">
      <div class="recuerdo-header">
        <strong class="recuerdo-titulo">{{ r.titulo }}</strong>
        <small class="recuerdo-fecha">{{ r.fecha }}</small>
      </div>

      <div class="recuerdo-cancion">
        <div class="cancion-icono">♪</div>
        {% if r.portada %}
          <img src="{{ r.portada }}" alt="Portada de {{ r.cancion }}" class="cancion-portada">
        {% endif %}
        <div class="cancion-info">
          <div class="cancion-titulo">{{ r.cancion }}</div>
          {% if r.artista %}
            <div class="cancion-artista">{{ r.artista }}</div>
          {% endif %}
        </div>
      </div>

      <p class="recuerdo-nota">{{ r.nota }}</p><p>{{ r.nota }}</p>
    </div>
  </div>
{% endfor %}
</div>

</body>
</html>
