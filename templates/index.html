{% extends "base.html" %}
{% block title %}Eco · Inicio{% endblock %}
{% block body_class %}inicio-page{% endblock %}
{% block navhint %}Inicio{% endblock %}
{% block extra_head %}
  <meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate, max-age=0">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
{% endblock %}
{% block extra_css %}
  .wrap{display:block;min-height:100vh;padding:0}
  .card{width:100%;border:0;background:transparent;backdrop-filter:none;box-shadow:none;border-radius:0}
  .topbar,.footer{display:none}
  .inner{padding:0}

  /* Movil: menos aire arriba y home mas compacta */
  @media (max-width: 520px){
    body{overflow-x:hidden}

    .inicio-auth{
      position: sticky;
      top: 10px;
      z-index: 50;
      display: flex;
      gap: 10px;
      justify-content: center;
      padding: 8px 12px;
    }

    .inicio-auth a,
    .inicio-auth button{
      min-height: 44px;
      padding: 10px 14px;
      border-radius: 999px;
      font-size: 15px;
    }

    .inicio-hub{
      padding-top: 10px !important;
    }

    .inicio-hero{
      margin-top: 0 !important;
      padding-top: 6px !important;
    }

    .inicio-subtitulo{
      margin-top: 10px !important;
      font-size: 24px !important;
      line-height: 1.15 !important;
    }

    .inicio-kicker{
      margin-bottom: 8px !important;
      opacity: .75;
    }

    .tocadiscos-placeholder{
      margin-top: 14px !important;
      width: 100% !important;
      border-radius: 22px !important;
    }

    .deck{
      width: 100% !important;
      aspect-ratio: 4 / 3;
      overflow: hidden;
    }

    .deck img,
    .deck-image{
      object-fit: cover;
      transform: scale(1.04);
    }
  }
{% endblock %}

{% block content %}
  <main class="inicio-hub">
    <section class="inicio-hero">
      <div class="inicio-auth">
        {% if current_user.is_authenticated %}
          <span class="inicio-user">Hola, {{ current_user.email }}</span>
          <form method="post" action="{{ url_for('auth.logout') }}" class="inicio-auth-form">
            <button type="submit" class="inicio-auth-link inicio-auth-btn">Salir</button>
          </form>
        {% else %}
          <a href="{{ url_for('auth.login') }}" class="inicio-auth-link">Entrar</a>
          <a href="{{ url_for('auth.register') }}" class="inicio-auth-link">Registrarse</a>
        {% endif %}
      </div>
      <p class="inicio-kicker">Eco</p>
      <p class="inicio-subtitulo">Una canción puede guardar un momento entero.</p>
    </section>

    <section class="tocadiscos-placeholder" aria-label="Zona reservada para tocadiscos 3D">
      <div class="deck deck-real">
        <img src="{{ url_for('static', filename='portada_eco.jpg') }}" alt="Tocadiscos 3D de Eco" class="deck-image" draggable="false">
        <a href="{{ url_for('main.biblioteca') }}" class="deck-center-btn" aria-label="Entrar a biblioteca">Biblioteca</a>
        <a href="{{ url_for('main.recuerdos', crear=1) }}" class="home-fab deck-fab" aria-label="Crear nuevo recuerdo">＋</a>
      </div>
    </section>

    {% if current_user.is_authenticated %}
      <section class="inicio-accesos" aria-label="Accesos principales">
        <a class="inicio-card" href="{{ url_for('main.biblioteca') }}">
          <span class="inicio-card-titulo">Biblioteca</span>
          <span class="inicio-card-texto">Ver todos tus recuerdos.</span>
        </a>
        <a class="inicio-card" href="{{ url_for('main.recuerdos', crear=1) }}">
          <span class="inicio-card-titulo">Nuevo recuerdo</span>
          <span class="inicio-card-texto">Guardar un momento en un toque.</span>
        </a>
        <a class="inicio-card" href="{{ url_for('main.capsulas_panel') }}">
          <span class="inicio-card-titulo">Cápsulas</span>
          <span class="inicio-card-texto">Programar y abrir cápsulas.</span>
        </a>
      </section>
    {% endif %}
  </main>
  <button id="ritualAudioToggle" class="home-audio-toggle" type="button" aria-pressed="true">Sonido: ON</button>
{% endblock %}

{% block extra_js %}
  <script src="{{ url_for('static', filename='js/inicio.js') }}"></script>
{% endblock %}
